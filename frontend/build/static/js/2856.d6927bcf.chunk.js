"use strict";(self.webpackChunkpfp_frontend=self.webpackChunkpfp_frontend||[]).push([[2856],{46291:(e,t,o)=>{o.d(t,{$x:()=>i,KS:()=>l,S7:()=>d,Xo:()=>s,vC:()=>n,yL:()=>a});const r=o(16599).A.create({baseURL:"/api/v1",timeout:1e4,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e.data,e=>{if(e.response){const{status:t,data:o}=e.response;throw 401===t&&(localStorage.removeItem("token"),window.location.href="/login"),new Error(o.message||"\u8bf7\u6c42\u5931\u8d25")}throw new Error("\u7f51\u7edc\u9519\u8bef")});const i={getLoadGenerators:e=>r.get("/load-generators/",{params:e}),getLoadGenerator:e=>r.get("/load-generators/".concat(e,"/")),createLoadGenerator:e=>r.post("/load-generators/",e),updateLoadGenerator:(e,t)=>r.put("/load-generators/".concat(e,"/"),t),deleteLoadGenerator:e=>r.delete("/load-generators/".concat(e,"/")),testConnection:e=>r.post("/load-generators/".concat(e,"/test-connection/")),getConfigs:e=>r.get("/load-generators/".concat(e,"/configs/")),createConfig:(e,t)=>r.post("/load-generators/".concat(e,"/configs/"),t),updateConfig:(e,t)=>r.put("/load-generators/configs/".concat(e,"/"),t),deleteConfig:e=>r.delete("/load-generators/configs/".concat(e,"/")),validateConfig:e=>r.post("/load-generators/configs/".concat(e,"/validate/"))},n={getTestTasks:e=>r.get("/test-tasks/",{params:e}),getTestTask:e=>r.get("/test-tasks/".concat(e,"/")),createTestTask:e=>r.post("/test-tasks/",e),updateTestTask:(e,t)=>r.put("/test-tasks/".concat(e,"/"),t),deleteTestTask:e=>r.delete("/test-tasks/".concat(e,"/")),getExecutions:e=>r.get("/test-tasks/".concat(e,"/executions/"))},s={getTestStrategies:e=>r.get("/test-strategies/",{params:e}),getTestStrategy:e=>r.get("/test-strategies/".concat(e,"/")),createTestStrategy:e=>r.post("/test-strategies/",e),updateTestStrategy:(e,t)=>r.put("/test-strategies/".concat(e,"/"),t),deleteTestStrategy:e=>r.delete("/test-strategies/".concat(e,"/"))},a={getTestScenariosByTask:e=>r.get("/test-scenarios/task/".concat(e,"/")),getTestScenario:e=>r.get("/test-scenarios/".concat(e,"/")),createTestScenario:e=>r.post("/test-scenarios/",e),updateTestScenario:(e,t)=>r.put("/test-scenarios/".concat(e,"/"),t),deleteTestScenario:e=>r.delete("/test-scenarios/".concat(e,"/")),getScenarioFiles:e=>r.get("/scenario-files/scenario/".concat(e,"/files/")),uploadScenarioFile:(e,t)=>r.post("/scenario-files/scenario/".concat(e,"/files/"),t,{headers:{"Content-Type":"multipart/form-data"}})},l={getTestExecutions:e=>r.get("/test-executions/",{params:e}),getTestExecution:e=>r.get("/test-executions/".concat(e,"/")),createTestExecution:e=>r.post("/test-executions/",e),updateTestExecution:(e,t)=>r.put("/test-executions/".concat(e,"/"),t),startTestExecution:e=>r.post("/test-executions/".concat(e,"/start/")),stopTestExecution:(e,t)=>r.post("/test-executions/".concat(e,"/stop/"),t),deleteTestExecution:e=>r.delete("/test-executions/".concat(e,"/"))},d={getHeartbeatStatus:()=>r.get("/heartbeat/status"),checkAllHeartbeats:()=>r.post("/heartbeat/check-all"),checkAllHeartbeatsAsync:()=>r.post("/heartbeat/check-all-async"),getTaskStatus:e=>r.get("/heartbeat/task/".concat(e))}},52856:(e,t,o)=>{o.r(t),o.d(t,{default:()=>O});var r=o(89379),i=o(65043),n=o(73216),s=o(23927),a=o(64376),l=o(97326),d=o(3427),c=o(22019),p=o(76399),x=o(6051),g=o(15492),f=o(47419),u=o(11645),h=o(89073),y=o(15444),m=o(63394),b=o(92782),j=o(98080),S=o(77677),k=o(88719),v=o(90617),A=o(36091),w=o(29792),C=o(14524),_=o(94786),z=o(95920),T=o(28369),B=o(61966),F=o(88143),L=o(46291),R=o(67785),E=o(54903),W=o(94733),I=o(46237),N=o(39470),M=o(83841),H=o(70579);const{Text:P}=s.A,D=e=>{let{value:t="",onChange:o,onSave:n,fileName:s="locustfile.py",readOnly:a=!1,height:l="400px"}=e;const[d,p]=(0,i.useState)(t),[y,m]=(0,i.useState)(!1),[b,j]=(0,i.useState)(null),[S,k]=(0,i.useState)(!1),v=(0,i.useRef)(null);(0,i.useEffect)(()=>{M.eo.register({id:"python"}),M.eo.setMonarchTokensProvider("python",{tokenizer:{root:[[/def\s+(\w+)/,"keyword.function"],[/class\s+(\w+)/,"keyword.class"],[/import\s+(\w+)/,"keyword.import"],[/from\s+(\w+)/,"keyword.import"],[/if\s+/,"keyword"],[/else\s*:/,"keyword"],[/elif\s+/,"keyword"],[/for\s+/,"keyword"],[/while\s+/,"keyword"],[/try\s*:/,"keyword"],[/except\s+/,"keyword"],[/finally\s*:/,"keyword"],[/with\s+/,"keyword"],[/as\s+/,"keyword"],[/return\s+/,"keyword"],[/yield\s+/,"keyword"],[/lambda\s+/,"keyword"],[/and\b/,"keyword"],[/or\b/,"keyword"],[/not\b/,"keyword"],[/in\b/,"keyword"],[/is\b/,"keyword"],[/True\b/,"constant"],[/False\b/,"constant"],[/None\b/,"constant"],[/#.*$/,"comment"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/'/,"string","@string_single"],[/\d*\.\d+([eE][-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F]+/,"number.hex"],[/\d+/,"number"],[/[{}()[\]\\]/,"@brackets"],[/[;,.]/,"delimiter"],[/\s+/,"white"],[/[a-zA-Z_$][a-zA-Z0-9_$]*/,"identifier"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape"],[/"/,"string","@pop"]],string_single:[[/[^\\']+/,"string"],[/\\./,"string.escape"],[/'/,"string","@pop"]]}}),M.EN.defineTheme("pfp-dark",{base:"vs-dark",inherit:!1,rules:[{token:"keyword",foreground:"569cd6",fontStyle:"bold"},{token:"keyword.function",foreground:"dcdcaa",fontStyle:"bold"},{token:"keyword.class",foreground:"4ec9b0",fontStyle:"bold"},{token:"keyword.import",foreground:"569cd6",fontStyle:"bold"},{token:"string",foreground:"ce9178"},{token:"number",foreground:"b5cea8"},{token:"number.float",foreground:"b5cea8"},{token:"number.hex",foreground:"b5cea8"},{token:"comment",foreground:"6a9955",fontStyle:"italic"},{token:"constant",foreground:"4fc1ff",fontStyle:"bold"},{token:"identifier",foreground:"9cdcfe"},{token:"delimiter",foreground:"d4d4d4"},{token:"brackets",foreground:"d4d4d4"},{token:"operator",foreground:"d4d4d4"},{token:"type",foreground:"4ec9b0"},{token:"variable",foreground:"9cdcfe"},{token:"parameter",foreground:"9cdcfe"}],colors:{"editor.background":"#0f0f23","editor.foreground":"#d4d4d4","editorLineNumber.foreground":"#858585","editorLineNumber.activeForeground":"#c6c6c6","editor.selectionBackground":"#264f78","editor.inactiveSelectionBackground":"#3a3d41","editorCursor.foreground":"#ffffff","editorCursor.background":"#0f0f23","editorWhitespace.foreground":"#404040","editor.lineHighlightBackground":"#1a1a2e","editor.lineHighlightBorder":"#1a1a2e","editorIndentGuide.background":"#404040","editorIndentGuide.activeBackground":"#707070","editorBracketMatch.background":"#0e639c50","editorBracketMatch.border":"#888888","editor.findMatchBackground":"#515c6a","editor.findMatchHighlightBackground":"#ea5c0055","editor.hoverHighlightBackground":"#264f7840","editorLink.activeForeground":"#4e94ce","editorWidget.background":"#252526","editorWidget.border":"#454545","editorSuggestWidget.background":"#252526","editorSuggestWidget.border":"#454545","editorSuggestWidget.foreground":"#cccccc","editorSuggestWidget.highlightForeground":"#0097fb","editorSuggestWidget.selectedBackground":"#094771"}}),M.EN.setTheme("pfp-dark")},[]);const w={beforeUpload:e=>{const t=new FileReader;return t.onload=t=>{var r;const i=null===(r=t.target)||void 0===r?void 0:r.result;p(i),k(!0),null===o||void 0===o||o(i),c.Ay.success("\u6587\u4ef6 ".concat(e.name," \u52a0\u8f7d\u6210\u529f"))},t.readAsText(e),!1},accept:".py",showUploadList:!1,multiple:!1};return(0,H.jsx)(h.A,{title:(0,H.jsxs)(x.A,{children:[(0,H.jsx)(A.A,{}),(0,H.jsx)(P,{strong:!0,children:"\u811a\u672c\u7f16\u8f91\u5668"}),S&&(0,H.jsx)(P,{type:"warning",children:"(\u672a\u4fdd\u5b58)"})]}),style:{background:"#0f0f23",border:"1px solid #2d3748"},bodyStyle:{padding:"16px"},children:(0,H.jsxs)(f.A,{gutter:[16,16],children:[(0,H.jsx)(u.A,{span:24,children:(0,H.jsxs)(x.A,{wrap:!0,children:[(0,H.jsx)(E.A,(0,r.A)((0,r.A)({},w),{},{children:(0,H.jsx)(g.Ay,{icon:(0,H.jsx)(W.A,{}),style:{background:"linear-gradient(135deg, #4c63d2 0%, #5a67d8 100%)",border:"none",color:"#fff"},children:"\u4e0a\u4f20\u811a\u672c"})})),(0,H.jsx)(g.Ay,{icon:(0,H.jsx)(I.A,{}),onClick:async()=>{if(d.trim()){m(!0);try{const e=await(async e=>{const t=[];try{const o=e.split("\n");for(let e=0;e<o.length;e++){const r=o[e],i=e+1;r.trim()&&!r.startsWith(" ")&&!r.startsWith("\t")&&r.includes(":")&&r.trim().endsWith(":");const n=(r.match(/\(/g)||[]).length,s=(r.match(/\)/g)||[]).length,a=(r.match(/\[/g)||[]).length,l=(r.match(/\]/g)||[]).length,d=(r.match(/\{/g)||[]).length,c=(r.match(/\}/g)||[]).length;n===s&&a===l&&d===c||t.push({line:i,column:0,message:"\u62ec\u53f7\u4e0d\u5339\u914d"});const p=(r.match(/'/g)||[]).length,x=(r.match(/"/g)||[]).length;p%2!==0&&x%2!==0&&t.push({line:i,column:0,message:"\u5b57\u7b26\u4e32\u5f15\u53f7\u4e0d\u5339\u914d"})}return{isValid:0===t.length,errors:t}}catch(o){return{isValid:!1,errors:[{line:1,column:0,message:"\u8bed\u6cd5\u68c0\u67e5\u5931\u8d25"}]}}})(d);j(e),e.isValid?c.Ay.success("\u8bed\u6cd5\u68c0\u67e5\u901a\u8fc7"):c.Ay.error("\u53d1\u73b0 ".concat(e.errors.length," \u4e2a\u8bed\u6cd5\u9519\u8bef"))}catch(e){c.Ay.error("\u8bed\u6cd5\u68c0\u67e5\u5931\u8d25")}finally{m(!1)}}else c.Ay.warning("\u8bf7\u5148\u8f93\u5165\u4ee3\u7801\u5185\u5bb9")},loading:y,style:{background:"linear-gradient(135deg, #52c41a 0%, #73d13d 100%)",border:"none",color:"#fff"},children:"\u8bed\u6cd5\u68c0\u67e5"}),(0,H.jsx)(g.Ay,{icon:(0,H.jsx)(F.A,{}),onClick:()=>{d.trim()?(null===n||void 0===n||n(d,s),k(!1),c.Ay.success("\u811a\u672c\u4fdd\u5b58\u6210\u529f")):c.Ay.warning("\u8bf7\u5148\u8f93\u5165\u4ee3\u7801\u5185\u5bb9")},disabled:!S,style:{background:S?"linear-gradient(135deg, #1890ff 0%, #40a9ff 100%)":"#555",border:"none",color:"#fff"},children:"\u4fdd\u5b58\u811a\u672c"})]})}),b&&(0,H.jsx)(u.A,{span:24,children:(0,H.jsxs)(h.A,{size:"small",style:{background:b.isValid?"#f6ffed":"#fff2f0",border:"1px solid ".concat(b.isValid?"#b7eb8f":"#ffccc7")},children:[(0,H.jsxs)(x.A,{children:[b.isValid?(0,H.jsx)(I.A,{style:{color:"#52c41a"}}):(0,H.jsx)(N.A,{style:{color:"#ff4d4f"}}),(0,H.jsx)(P,{style:{color:b.isValid?"#52c41a":"#ff4d4f"},children:b.isValid?"\u8bed\u6cd5\u68c0\u67e5\u901a\u8fc7":"\u53d1\u73b0 ".concat(b.errors.length," \u4e2a\u9519\u8bef")})]}),!b.isValid&&(0,H.jsx)("div",{style:{marginTop:"8px"},children:b.errors.map((e,t)=>(0,H.jsxs)("div",{style:{fontSize:"12px",color:"#ff4d4f"},children:["\u7b2c ",e.line," \u884c: ",e.message]},t))})]})}),(0,H.jsx)(u.A,{span:24,children:(0,H.jsx)("div",{style:{border:"1px solid #2d3748",borderRadius:"6px",overflow:"hidden"},children:(0,H.jsx)(R.KE,{height:l,language:"python",value:d,onChange:e=>{const r=e||"";p(r),k(r!==t),null===o||void 0===o||o(r)},onMount:e=>{v.current=e,e.updateOptions({fontSize:14,fontFamily:'Monaco, "Menlo", "Ubuntu Mono", Consolas, "Courier New", monospace',lineNumbers:"on",roundedSelection:!1,scrollBeyondLastLine:!1,automaticLayout:!0,minimap:{enabled:!1},wordWrap:"on",tabSize:4,insertSpaces:!0,detectIndentation:!1,cursorBlinking:"blink",cursorStyle:"line",renderLineHighlight:"line",selectionHighlight:!0,occurrencesHighlight:"singleFile",bracketPairColorization:{enabled:!0}}),M.EN.setTheme("vs-dark")},options:{readOnly:a,fontSize:14,fontFamily:'Monaco, "Menlo", "Ubuntu Mono", Consolas, "Courier New", monospace',lineNumbers:"on",roundedSelection:!1,scrollBeyondLastLine:!1,automaticLayout:!0,minimap:{enabled:!1},wordWrap:"on",tabSize:4,insertSpaces:!0,detectIndentation:!1,cursorBlinking:"blink",cursorStyle:"line",renderLineHighlight:"line",selectionHighlight:!0,occurrencesHighlight:"singleFile",bracketPairColorization:{enabled:!0},theme:"vs-dark"}})})}),(0,H.jsx)(u.A,{span:24,children:(0,H.jsxs)(P,{type:"secondary",style:{fontSize:"12px"},children:["\u5f53\u524d\u6587\u4ef6: ",s," | \u5b57\u7b26\u6570: ",d.length," | \u884c\u6570: ",d.split("\n").length]})})]})})},{Title:G,Text:U}=s.A,{Step:q}=a.A,{Panel:V}=l.A,K=()=>{const{id:e}=(0,n.g)(),t=(0,n.Zp)(),[o,s]=(0,i.useState)(null),[l,R]=(0,i.useState)([]),[E,W]=(0,i.useState)([]),[I,N]=(0,i.useState)([]),[M,P]=(0,i.useState)([]),[V,K]=(0,i.useState)(!1),[O,$]=(0,i.useState)(!1),[X,Z]=(0,i.useState)(!1),[Q,Y]=(0,i.useState)(!1),[J,ee]=(0,i.useState)(0),[te]=d.A.useForm(),[oe]=d.A.useForm(),[re,ie]=(0,i.useState)(null),[ne,se]=(0,i.useState)(null),[ae,le]=(0,i.useState)(null),[de,ce]=(0,i.useState)(null),[pe,xe]=(0,i.useState)([]),[ge,fe]=(0,i.useState)(null),[ue,he]=(0,i.useState)(new Set),[ye,me]=(0,i.useState)(""),[be,je]=(0,i.useState)(!1),[Se,ke]=(0,i.useState)(null),[ve,Ae]=(0,i.useState)([]),[we,Ce]=(0,i.useState)(null),[_e,ze]=(0,i.useState)(""),[Te,Be]=(0,i.useState)(""),[Fe,Le]=(0,i.useState)("locustfile.py"),[Re,Ee]=(0,i.useState)({}),[We,Ie]=(0,i.useState)(!1);(0,i.useEffect)(()=>{e&&(He(),Pe(),De(),Ge())},[e]);const Ne=(0,i.useCallback)(async e=>{try{const t=await fetch("/api/v1/scenario-files/files/".concat(e.id,"/content/"));if(t.ok){const o=await t.text();Be(o),Le(e.file_name),c.Ay.success("\u811a\u672c ".concat(e.file_name," \u52a0\u8f7d\u6210\u529f"))}else c.Ay.error("\u52a0\u8f7d\u811a\u672c\u5931\u8d25")}catch(t){console.error("\u52a0\u8f7d\u811a\u672c\u5931\u8d25:",t),c.Ay.error("\u52a0\u8f7d\u811a\u672c\u5931\u8d25")}},[]);(0,i.useEffect)(()=>{if(Se&&Re[Se.id]&&Re[Se.id].length>0){We&&Ie(!1);const e=Re[Se.id],t=e.find(e=>e.file_name.endsWith(".py")||e.is_script);t?Ne(t):e[0]&&Ne(e[0])}else Se&&Re[Se.id]&&0===Re[Se.id].length?(Be(""),Le("locustfile.py")):Se||(We&&Ie(!1),Be(""),Le("locustfile.py"))},[Se,Re,Ne,We]);const Me=()=>{Be('from locust import HttpUser, task, between\n\nclass QuickstartUser(HttpUser):\n    wait_time = between(1, 3)\n\n    @task\n    def hello_world(self):\n        self.client.get("/")\n        self.client.get("/world")\n'),Le("locustfile.py"),Ie(!0)},He=async()=>{if(e){K(!0);try{const o=await L.vC.getTestTask(parseInt(e));if(s(o),o.scenarios&&o.scenarios.length>0){const e={};for(const r of o.scenarios)try{const t=await L.yL.getScenarioFiles(r.id);e[r.id]=t}catch(t){console.error("Failed to fetch files for scenario ".concat(r.id,":"),t),e[r.id]=[]}if(Ee(e),!Se){const e=o.scenarios[0];ke(e)}}else ke(null),Be(""),Le("locustfile.py"),Ee({})}catch(t){console.error("Error in fetchTestTask:",t),c.Ay.error("Failed to fetch test task details")}finally{K(!1)}}},Pe=async()=>{if(e)try{const t=await L.vC.getExecutions(parseInt(e));R(t)}catch(t){c.Ay.error("Failed to fetch execution records")}},De=async()=>{try{const e=await L.Xo.getTestStrategies();W(e)}catch(e){c.Ay.error("Failed to fetch strategy list")}},Ge=async()=>{try{const e=await L.$x.getLoadGenerators();N(e)}catch(e){c.Ay.error("Failed to fetch load generator list")}},Ue=async e=>{try{const t=await L.$x.getConfigs(e);P(t)}catch(t){c.Ay.error("Failed to load load generator configs")}},qe=()=>{const e={id:Date.now(),name:"Scenario ".concat(ve.length+1),interface_name:"",interface_url:"",method:"GET",weight:1,headers:{},body:"",timeout:30,isNew:!0};Ae([...ve,e]),ke(e),je(!1),ee(0),ie(null),se(null),ce(null),xe([]),fe(null),me("")},Ve=async e=>{ke(e),je(!1),ee(0);const t=Re[e.id];if(t&&t.length>0){const e=t.find(e=>e.file_name.endsWith(".py")||e.is_script);e?await Ne(e):await Ne(t[0])}else Be(""),Le("locustfile.py")},Ke=async()=>{if(Se&&o)try{const e={task_id:o.id,interface_name:Se.name,interface_url:Se.interface_url||"http://example.com",method:Se.method||"GET",weight:Se.weight||1,order:Se.order||1,headers:Se.headers||{},body:Se.body||"",timeout:Se.timeout||30},t=await L.yL.createTestScenario(e);c.Ay.success("Scenario saved successfully"),Ae(ve.map(e=>e.id===Se.id?(0,r.A)((0,r.A)({},t),{},{isNew:!1}):e));const i=(0,r.A)((0,r.A)({},t),{},{isNew:!1});ke(i),await He(),ke(i)}catch(e){console.error("Failed to save scenario:",e),c.Ay.error("Failed to save scenario")}},Oe=async e=>{try{var t;const r=ve.find(t=>t.id===e),i=null===o||void 0===o||null===(t=o.scenarios)||void 0===t?void 0:t.find(t=>t.id===e);r&&r.isNew?(Ae(ve.filter(t=>t.id!==e)),(null===Se||void 0===Se?void 0:Se.id)===e&&ke(null)):i&&(await L.yL.deleteTestScenario(e),c.Ay.success("Scenario deleted successfully"),await He())}catch(r){console.error("Failed to delete scenario:",r),c.Ay.error("Failed to delete scenario")}},$e=e=>{he(t=>{const o=new Set(t);return o.has(e)?o.delete(e):o.add(e),o})},Xe=e=>{Ce(e.id.toString()),ze(e.name||e.interface_name||"")},Ze=async e=>{if(_e&&_e.trim())try{var t;const i=null===o||void 0===o||null===(t=o.scenarios)||void 0===t?void 0:t.find(t=>t.id.toString()===e),n=ve.find(t=>t.id.toString()===e);i?(await L.yL.updateTestScenario(i.id,{interface_name:_e.trim()}),await He()):n&&(Ae(ve.map(t=>t.id.toString()===e?(0,r.A)((0,r.A)({},t),{},{name:_e.trim()}):t)),(null===Se||void 0===Se?void 0:Se.id.toString())===e&&ke((0,r.A)((0,r.A)({},Se),{},{name:_e.trim()}))),Ce(null),ze(""),c.Ay.success("Scenario name updated successfully")}catch(i){console.error("Failed to update scenario name:",i),c.Ay.error("Failed to update scenario name")}},Qe=async(e,t)=>{if(Se&&o)try{const o=new File([e],t,{type:"text/python"});if(Se.isNew){if(await Ke(),Se&&!Se.isNew){const i=new FormData;i.append("file",o),i.append("description","Script file for scenario: ".concat(Se.interface_name));const n=await L.yL.uploadScenarioFile(Se.id,i);Ee(e=>(0,r.A)((0,r.A)({},e),{},{[Se.id]:[...e[Se.id]||[],n]})),Be(e),Le(t)}c.Ay.success("\u573a\u666f\u548c\u811a\u672c\u4fdd\u5b58\u6210\u529f")}else{const e=new FormData;e.append("file",o),e.append("description","Script file for scenario: ".concat(Se.interface_name));const t=await L.yL.uploadScenarioFile(Se.id,e);await He(),Ee(e=>(0,r.A)((0,r.A)({},e),{},{[Se.id]:[...e[Se.id]||[],t]})),c.Ay.success("\u811a\u672c\u4fdd\u5b58\u6210\u529f")}Be(e),Le(t)}catch(i){console.error("\u4fdd\u5b58\u811a\u672c\u5931\u8d25:",i),c.Ay.error("\u4fdd\u5b58\u811a\u672c\u5931\u8d25")}else c.Ay.warning("\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u573a\u666f")},Ye=async()=>{if(re&&ne&&ae&&de)try{const t={task_id:parseInt(e),strategy_id:re.id,load_generator_id:ne.id,load_generator_config_id:de.id,execution_name:"Execution_".concat((new Date).toLocaleString())};await L.KS.createTestExecution(t),c.Ay.success("Test execution created successfully"),je(!1),ee(0),Pe()}catch(t){c.Ay.error("Failed to create test execution")}else c.Ay.error("Please complete all configuration steps")},Je=[{title:"Execution Name",dataIndex:"execution_name",key:"execution_name"},{title:"Status",dataIndex:"status",key:"status",render:e=>(e=>{const t={pending:{color:"default",text:"Pending"},running:{color:"processing",text:"Running"},completed:{color:"success",text:"Completed"},failed:{color:"error",text:"Failed"},cancelled:{color:"warning",text:"Cancelled"}}[e]||{color:"default",text:e};return(0,H.jsx)(p.A,{color:t.color,children:t.text})})(e)},{title:"Total Requests",dataIndex:"total_requests",key:"total_requests"},{title:"Failures",dataIndex:"total_failures",key:"total_failures"},{title:"Avg Response Time (ms)",dataIndex:"avg_response_time",key:"avg_response_time",render:e=>e.toFixed(2)},{title:"RPS",dataIndex:"requests_per_second",key:"requests_per_second",render:e=>e.toFixed(2)},{title:"Error Rate",dataIndex:"error_rate",key:"error_rate",render:e=>"".concat((100*e).toFixed(2),"%")},{title:"Started At",dataIndex:"started_at",key:"started_at",render:e=>e?new Date(e).toLocaleString():"-"},{title:"Completed At",dataIndex:"completed_at",key:"completed_at",render:e=>e?new Date(e).toLocaleString():"-"},{title:"Actions",key:"action",render:(e,o)=>(0,H.jsxs)(x.A,{children:["pending"===o.status&&(0,H.jsx)(g.Ay,{size:"small",type:"primary",icon:(0,H.jsx)(S.A,{}),onClick:()=>{L.KS.startTestExecution(o.id).then(()=>{c.Ay.success("Execution started"),Pe()}).catch(()=>{c.Ay.error("Failed to start execution")})},children:"Start"}),"running"===o.status&&(0,H.jsx)(g.Ay,{size:"small",danger:!0,icon:(0,H.jsx)(k.A,{}),onClick:()=>{L.KS.stopTestExecution(o.id,{reason:"Manual stop"}).then(()=>{c.Ay.success("Execution stopped"),Pe()}).catch(()=>{c.Ay.error("Failed to stop execution")})},children:"Stop"}),(0,H.jsx)(g.Ay,{size:"small",icon:(0,H.jsx)(v.A,{}),onClick:()=>t("/test-executions/".concat(o.id)),children:"View Details"})]})}];if(!o)return(0,H.jsx)("div",{children:"Loading..."});const et=l[0];et&&(et.total_requests,et.total_failures,et.total_requests);return(0,H.jsxs)("div",{style:{padding:"20px",background:"linear-gradient(135deg, #0f1419 0%, #1a1f2e 100%)",minHeight:"100vh"},children:[(0,H.jsx)("div",{style:{marginBottom:"20px",padding:"20px",background:"rgba(255, 255, 255, 0.02)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.08)",backdropFilter:"blur(10px)",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2)"},children:(0,H.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"20px",marginBottom:"20px",flexWrap:"wrap"},children:[(0,H.jsx)(g.Ay,{icon:(0,H.jsx)(z.A,{}),onClick:()=>t("/test-management"),style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"#fff",height:"36px",borderRadius:"6px",flexShrink:0},children:"Back"}),(0,H.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",flex:1,minWidth:0},children:[(0,H.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,H.jsx)("span",{style:{color:"#8c8c8c",fontSize:"12px",fontWeight:500},children:"Task:"}),(0,H.jsx)(G,{level:4,style:{margin:0,color:"#fff",fontWeight:600,fontSize:"18px"},children:o.name})]}),(0,H.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,H.jsx)("span",{style:{color:"#8c8c8c",fontSize:"12px",fontWeight:500},children:"Created:"}),(0,H.jsx)(U,{style:{color:"#fff",fontSize:"14px",fontWeight:500},children:new Date(o.created_at).toLocaleString()})]}),o.description&&(0,H.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1,minWidth:0},children:[(0,H.jsx)("span",{style:{color:"#8c8c8c",fontSize:"12px",fontWeight:500,flexShrink:0},children:"Desc:"}),(0,H.jsx)(U,{style:{color:"#fff",fontSize:"14px",lineHeight:"1.4",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o.description})]})]})]})}),(0,H.jsxs)(h.A,{style:{marginBottom:"20px",background:"rgba(255, 255, 255, 0.02)",border:"1px solid rgba(255, 255, 255, 0.08)",borderRadius:"8px",backdropFilter:"blur(10px)",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2)"},headStyle:{background:"transparent",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",padding:"16px 20px 12px 20px"},bodyStyle:{background:"transparent",padding:"0"},children:[(0,H.jsx)(G,{level:3,style:{color:"#fff",margin:0,fontWeight:600,fontSize:"16px"},children:"\ud83c\udfaf Test Scenarios Management"}),(0,H.jsxs)(f.A,{gutter:0,style:{minHeight:"500px"},children:[(0,H.jsxs)(u.A,{span:4,style:{borderRight:"1px solid rgba(255, 255, 255, 0.08)",padding:"16px",position:"sticky",top:0,alignSelf:"flex-start",background:"rgba(255, 255, 255, 0.01)"},children:[(0,H.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,H.jsx)(G,{level:4,style:{margin:0,color:"#fff",fontWeight:600,fontSize:"14px"},children:"\ud83d\udcdd Scenarios"}),(0,H.jsx)(U,{style:{color:"#8c8c8c",fontSize:"11px"},children:"Manage your test scenarios"})]}),(0,H.jsx)("div",{style:{marginBottom:"16px"},children:o.scenarios&&o.scenarios.length>0||ve.length>0?(0,H.jsxs)("div",{children:[o.scenarios&&o.scenarios.map((e,t)=>{const o=ue.has(e.id.toString()),r=Re[e.id]&&Re[e.id].length>0,i=(null===Se||void 0===Se?void 0:Se.id)===e.id;return(0,H.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,H.jsxs)("div",{style:{padding:"10px 12px",background:i?"linear-gradient(135deg, #1890ff 0%, #40a9ff 100%)":"rgba(255, 255, 255, 0.03)",borderRadius:"6px",border:i?"1px solid rgba(24, 144, 255, 0.3)":"1px solid rgba(255, 255, 255, 0.05)",position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:i?"0 2px 12px rgba(24, 144, 255, 0.2)":"0 1px 4px rgba(0, 0, 0, 0.1)"},onClick:()=>Ve(e),children:[(0,H.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:[(0,H.jsx)("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:i?"#fff":"#1890ff",marginRight:"8px"}}),(0,H.jsxs)("div",{children:[(0,H.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:we===e.id.toString()?(0,H.jsx)(y.A,{value:_e||"",onChange:e=>ze(e.target.value),onPressEnter:()=>Ze(e.id.toString()),onBlur:()=>Ze(e.id.toString()),style:{fontSize:"12px",height:"20px",background:"transparent",border:"1px solid #1890ff",color:"#fff"},autoFocus:!0}):(0,H.jsx)(U,{style:{color:"#fff",fontSize:"12px",fontWeight:i?600:500,cursor:"pointer"},onClick:t=>{t.stopPropagation(),Xe(e)},children:e.interface_name||"Scenario ".concat(t+1)})}),(0,H.jsx)(U,{style:{color:i?"rgba(255, 255, 255, 0.8)":"#8c8c8c",fontSize:"10px",display:"block"},children:"Database scenario"})]})]}),(0,H.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[r&&(0,H.jsx)(g.Ay,{type:"text",size:"small",icon:(0,H.jsx)(T.A,{}),onClick:t=>{t.stopPropagation(),$e(e.id.toString())},style:{color:i?"#fff":"#a0aec0",padding:"2px",minWidth:"20px",height:"20px",borderRadius:"4px",background:"transparent",border:"none",transform:o?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"}}),(0,H.jsx)(g.Ay,{type:"text",size:"small",icon:(0,H.jsx)(B.A,{}),onClick:t=>{t.stopPropagation(),Oe(e.id)},style:{color:"#ff4d4f",padding:"2px",minWidth:"20px",height:"20px",borderRadius:"4px",background:"rgba(255, 77, 79, 0.1)",border:"1px solid rgba(255, 77, 79, 0.2)"}})]})]}),o&&r&&(0,H.jsxs)("div",{style:{marginTop:"4px",marginLeft:"20px",padding:"8px 12px",background:"rgba(255, 255, 255, 0.02)",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[(0,H.jsxs)(U,{style:{color:"#8c8c8c",fontSize:"10px",marginBottom:"6px",display:"block"},children:["Saved Files (",Re[e.id].length,")"]}),Re[e.id].map(e=>(0,H.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px 8px",marginBottom:"2px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"3px",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>{Ne(e)},children:[(0,H.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,H.jsx)(A.A,{style:{fontSize:"10px",color:"#1890ff"}}),(0,H.jsx)(U,{style:{color:"#fff",fontSize:"10px",maxWidth:"100px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.file_name})]}),(0,H.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:(0,H.jsx)(U,{style:{color:"#8c8c8c",fontSize:"9px"},children:e.file_size?"".concat((e.file_size/1024).toFixed(1),"KB"):"N/A"})})]},e.id))]})]},e.id)}),ve.map((e,t)=>{const o=ue.has(e.id.toString()),r=pe.length>0,i=(null===Se||void 0===Se?void 0:Se.id)===e.id;return(0,H.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,H.jsxs)("div",{style:{padding:"10px 12px",background:i?"linear-gradient(135deg, #1890ff 0%, #40a9ff 100%)":"rgba(255, 255, 255, 0.03)",borderRadius:"6px",border:i?"1px solid rgba(24, 144, 255, 0.3)":"1px solid rgba(255, 255, 255, 0.05)",position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:i?"0 2px 12px rgba(24, 144, 255, 0.2)":"0 1px 4px rgba(0, 0, 0, 0.1)"},onClick:()=>Ve(e),children:[(0,H.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:[(0,H.jsx)("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:i?"#fff":"#52c41a",marginRight:"8px"}}),(0,H.jsx)("div",{children:(0,H.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[we===e.id.toString()?(0,H.jsx)(y.A,{value:_e||"",onChange:e=>ze(e.target.value),onPressEnter:()=>Ze(e.id.toString()),onBlur:()=>Ze(e.id.toString()),style:{fontSize:"12px",height:"20px",background:"transparent",border:"1px solid #1890ff",color:"#fff"},autoFocus:!0}):(0,H.jsx)(U,{style:{color:"#fff",fontSize:"12px",fontWeight:i?600:500,cursor:"pointer"},onClick:t=>{t.stopPropagation(),Xe(e)},children:e.name}),e.isNew&&(0,H.jsx)("div",{style:{padding:"1px 4px",background:"#52c41a",borderRadius:"3px",fontSize:"8px",color:"#fff",fontWeight:500},children:"NEW"})]})})]}),(0,H.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[r&&(0,H.jsx)(g.Ay,{type:"text",size:"small",icon:(0,H.jsx)(T.A,{}),onClick:t=>{t.stopPropagation(),$e(e.id.toString())},style:{color:i?"#fff":"#a0aec0",padding:"2px",minWidth:"20px",height:"20px",borderRadius:"4px",background:"transparent",border:"none",transform:o?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"}}),e.isNew&&(0,H.jsx)(g.Ay,{type:"text",size:"small",icon:(0,H.jsx)(F.A,{}),onClick:e=>{e.stopPropagation(),Ke()},style:{color:"#52c41a",padding:"2px",minWidth:"20px",height:"20px",borderRadius:"4px",background:"rgba(82, 196, 26, 0.1)",border:"1px solid rgba(82, 196, 26, 0.2)",fontSize:"10px"}}),(0,H.jsx)(g.Ay,{type:"text",size:"small",icon:(0,H.jsx)(B.A,{}),onClick:t=>{t.stopPropagation(),Oe(e.id)},style:{color:"#ff4d4f",padding:"2px",minWidth:"20px",height:"20px",borderRadius:"4px",background:"rgba(255, 77, 79, 0.1)",border:"1px solid rgba(255, 77, 79, 0.2)"}})]})]}),o&&r&&(0,H.jsxs)("div",{style:{marginTop:"4px",marginLeft:"20px",padding:"8px 12px",background:"rgba(255, 255, 255, 0.02)",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[(0,H.jsxs)(U,{style:{color:"#8c8c8c",fontSize:"10px",marginBottom:"6px",display:"block"},children:["Uploaded Files (",pe.length,")"]}),pe.map(e=>(0,H.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px 8px",marginBottom:"2px",background:ge===e.id?"rgba(24, 144, 255, 0.1)":"transparent",borderRadius:"3px",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>(e=>{fe(e);const t=pe.find(t=>t.id===e);t&&me(t.content)})(e.id),children:[(0,H.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,H.jsx)(A.A,{style:{fontSize:"10px",color:"#1890ff"}}),(0,H.jsx)(U,{style:{color:"#fff",fontSize:"10px",maxWidth:"100px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.file.name})]}),(0,H.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,H.jsxs)(U,{style:{color:"#8c8c8c",fontSize:"9px"},children:[(e.file.size/1024).toFixed(1),"KB"]}),(0,H.jsx)(g.Ay,{type:"text",size:"small",icon:(0,H.jsx)(B.A,{}),onClick:t=>{t.stopPropagation(),(e=>{if(xe(t=>t.filter(t=>t.id!==e)),ge===e){const t=pe.filter(t=>t.id!==e);if(t.length>0){const e=t[0].id;fe(e),me(t[0].content)}else fe(null),me("")}})(e.id)},style:{color:"#ff4d4f",padding:"1px",minWidth:"16px",height:"16px",borderRadius:"2px",background:"rgba(255, 77, 79, 0.1)",border:"1px solid rgba(255, 77, 79, 0.2)",fontSize:"8px"}})]})]},e.id))]})]},e.id)})]}):(0,H.jsxs)("div",{style:{textAlign:"center",padding:"20px 12px",color:"#8c8c8c",fontSize:"12px"},children:[(0,H.jsx)("div",{style:{fontSize:"32px",marginBottom:"8px",opacity:.5},children:"\ud83d\udcdd"}),(0,H.jsx)("div",{children:"No scenarios created yet"}),(0,H.jsx)("div",{style:{fontSize:"10px",marginTop:"2px"},children:"Create your first scenario to get started"})]})}),(0,H.jsx)("div",{style:{marginTop:"12px"},children:(0,H.jsx)(g.Ay,{type:"primary",icon:(0,H.jsx)(S.A,{}),onClick:qe,style:{width:"100%",height:"36px",background:"linear-gradient(135deg, #1890ff 0%, #40a9ff 100%)",border:"none",borderRadius:"6px",fontWeight:500,fontSize:"12px"},children:"Create New Scenario"})})]}),(0,H.jsx)(u.A,{span:20,style:{padding:"16px"},children:(0,H.jsxs)("div",{style:{maxHeight:"60vh",overflowY:"auto",paddingRight:"8px",background:"rgba(255, 255, 255, 0.01)",borderRadius:"8px",padding:"16px"},children:[(0,H.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.03)",padding:"12px 16px",borderRadius:"6px",marginBottom:"16px",border:"1px solid rgba(255, 255, 255, 0.08)",backdropFilter:"blur(10px)"},children:(0,H.jsxs)(a.A,{current:J,onChange:e=>ee(e),size:"small",children:[(0,H.jsx)(q,{title:"Script Upload"}),(0,H.jsx)(q,{title:"Load Test Config"}),(0,H.jsx)(q,{title:"Load Generator"}),(0,H.jsx)(q,{title:"Execute"})]})}),(0,H.jsx)("div",{style:{minHeight:"350px",background:"rgba(255, 255, 255, 0.02)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.08)",padding:"20px",backdropFilter:"blur(10px)"},children:Se?(0,H.jsxs)("div",{children:[(0,H.jsx)("div",{style:{minHeight:200},children:(()=>{var e,t;return null===(t=[{title:"Script Upload",content:(0,H.jsxs)("div",{children:[(0,H.jsx)(G,{level:4,style:{color:"#fff",marginBottom:"20px"},children:"Upload Locust Scripts"}),(0,H.jsx)(f.A,{gutter:16,style:{height:"500px"},children:(0,H.jsx)(u.A,{span:24,children:Se?(null===(e=Re[Se.id])||void 0===e?void 0:e.length)>0||We?(0,H.jsx)(D,{value:Te,onChange:Be,onSave:Qe,fileName:Fe,height:"450px"}):(0,H.jsxs)("div",{style:{height:"450px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"rgba(255, 255, 255, 0.02)",border:"1px solid rgba(255, 255, 255, 0.08)",borderRadius:"8px",color:"#8c8c8c"},children:[(0,H.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:"\ud83d\udcc4"}),(0,H.jsx)(G,{level:4,style:{color:"#8c8c8c",marginBottom:"8px",fontSize:"16px"},children:"No scripts found for this scenario"}),(0,H.jsx)(U,{style:{color:"#666",fontSize:"12px",textAlign:"center",maxWidth:"360px",marginBottom:"16px"},children:"Click the button below to create a default locustfile.py and start editing"}),(0,H.jsx)(g.Ay,{type:"primary",icon:(0,H.jsx)(A.A,{}),onClick:Me,style:{background:"linear-gradient(135deg, #1890ff 0%, #40a9ff 100%)",border:"none",height:"36px",borderRadius:"6px",padding:"0 20px",fontWeight:500,fontSize:"12px"},children:"Create Script"})]}):(0,H.jsxs)("div",{style:{height:"450px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"rgba(255, 255, 255, 0.02)",border:"1px solid rgba(255, 255, 255, 0.08)",borderRadius:"8px",color:"#8c8c8c"},children:[(0,H.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:"\ud83d\udcdd"}),(0,H.jsx)(G,{level:4,style:{color:"#8c8c8c",marginBottom:"8px",fontSize:"16px"},children:"Create First Scenario"}),(0,H.jsx)(U,{style:{color:"#666",fontSize:"12px",textAlign:"center",maxWidth:"300px"},children:"Please create a test scenario first to start writing and uploading your Locust scripts"})]})})})]})},{title:"Load Test Configuration",content:(0,H.jsxs)("div",{children:[(0,H.jsx)(G,{level:4,style:{color:"#fff",marginBottom:"20px"},children:"Configure Load Test Deployment"}),(0,H.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,H.jsx)(G,{level:5,style:{color:"#fff",marginBottom:"16px"},children:"Select Load Generator"}),(0,H.jsx)(f.A,{gutter:16,children:I.map(e=>(0,H.jsx)(u.A,{span:8,children:(0,H.jsx)(h.A,{hoverable:!0,style:{border:(null===ne||void 0===ne?void 0:ne.id)===e.id?"2px solid #1890ff":"1px solid #555",cursor:"pointer",background:"#333",borderRadius:"8px"},bodyStyle:{background:"#333",color:"#fff",padding:"16px"},onClick:()=>se(e),children:(0,H.jsxs)("div",{style:{textAlign:"center"},children:[(0,H.jsx)(w.A,{style:{fontSize:24,color:"#1890ff",marginBottom:8}}),(0,H.jsx)(G,{level:5,style:{color:"#fff",margin:"0 0 8px 0"},children:e.name}),(0,H.jsxs)(U,{style:{color:"#ccc",display:"block",marginBottom:"8px"},children:[e.host,":",e.port]}),(0,H.jsxs)("div",{style:{fontSize:"12px"},children:[(0,H.jsxs)("div",{style:{color:"online"===e.status?"#52c41a":"#ff4d4f",marginBottom:"4px"},children:["Status: ",e.status]}),(0,H.jsxs)("div",{style:{color:"#8c8c8c"},children:["CPU: ",e.cpu_cores||"N/A"," | Memory: ",e.memory_gb||"N/A","GB"]})]})]})})},e.id))})]}),(0,H.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,H.jsx)(G,{level:5,style:{color:"#fff",marginBottom:"16px"},children:"Select Deployment Mode"}),(0,H.jsxs)(f.A,{gutter:16,children:[(0,H.jsx)(u.A,{span:8,children:(0,H.jsx)(h.A,{hoverable:!0,style:{border:"standalone"===(null===ae||void 0===ae?void 0:ae.deployment_mode)?"2px solid #1890ff":"1px solid #555",cursor:"pointer",background:"#333",borderRadius:"8px"},bodyStyle:{background:"#333",color:"#fff",padding:"16px"},onClick:()=>le({id:1,deployment_mode:"standalone",name:"Standalone Mode",description:"Single machine deployment"}),children:(0,H.jsxs)("div",{style:{textAlign:"center"},children:[(0,H.jsx)(C.A,{style:{fontSize:24,color:"#1890ff",marginBottom:8}}),(0,H.jsx)(G,{level:5,style:{color:"#fff",margin:"0 0 8px 0"},children:"Standalone"}),(0,H.jsx)(U,{style:{color:"#ccc",fontSize:"12px"},children:"Single machine deployment for small-scale testing"})]})})}),(0,H.jsx)(u.A,{span:8,children:(0,H.jsx)(h.A,{hoverable:!0,style:{border:"master-slave-1"===(null===ae||void 0===ae?void 0:ae.deployment_mode)?"2px solid #1890ff":"1px solid #555",cursor:"pointer",background:"#333",borderRadius:"8px"},bodyStyle:{background:"#333",color:"#fff",padding:"16px"},onClick:()=>le({id:2,deployment_mode:"master-slave-1",name:"1 Master + 1 Slave",description:"Distributed testing with 2 machines"}),children:(0,H.jsxs)("div",{style:{textAlign:"center"},children:[(0,H.jsx)(w.A,{style:{fontSize:24,color:"#1890ff",marginBottom:8}}),(0,H.jsx)(G,{level:5,style:{color:"#fff",margin:"0 0 8px 0"},children:"1 Master + 1 Slave"}),(0,H.jsx)(U,{style:{color:"#ccc",fontSize:"12px"},children:"Distributed testing with 2 machines"})]})})}),(0,H.jsx)(u.A,{span:8,children:(0,H.jsx)(h.A,{hoverable:!0,style:{border:"master-slave-2"===(null===ae||void 0===ae?void 0:ae.deployment_mode)?"2px solid #1890ff":"1px solid #555",cursor:"pointer",background:"#333",borderRadius:"8px"},bodyStyle:{background:"#333",color:"#fff",padding:"16px"},onClick:()=>le({id:3,deployment_mode:"master-slave-2",name:"1 Master + 2 Slaves",description:"High-performance distributed testing"}),children:(0,H.jsxs)("div",{style:{textAlign:"center"},children:[(0,H.jsx)(w.A,{style:{fontSize:24,color:"#1890ff",marginBottom:8}}),(0,H.jsx)(G,{level:5,style:{color:"#fff",margin:"0 0 8px 0"},children:"1 Master + 2 Slaves"}),(0,H.jsx)(U,{style:{color:"#ccc",fontSize:"12px"},children:"High-performance distributed testing"})]})})})]})]}),ne&&ae&&(0,H.jsxs)("div",{style:{background:"#333",borderRadius:"8px",padding:"20px",border:"1px solid #555"},children:[(0,H.jsx)(G,{level:5,style:{color:"#fff",marginBottom:"16px"},children:"Deployment Configuration"}),(0,H.jsxs)(f.A,{gutter:16,children:[(0,H.jsxs)(u.A,{span:12,children:[(0,H.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,H.jsx)(U,{style:{color:"#8c8c8c",fontSize:"12px"},children:"Load Generator:"}),(0,H.jsxs)("div",{style:{color:"#fff",fontSize:"14px",fontWeight:500},children:[ne.name," (",ne.host,":",ne.port,")"]})]}),(0,H.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,H.jsx)(U,{style:{color:"#8c8c8c",fontSize:"12px"},children:"Deployment Mode:"}),(0,H.jsx)("div",{style:{color:"#fff",fontSize:"14px",fontWeight:500},children:ae.name})]})]}),(0,H.jsxs)(u.A,{span:12,children:[(0,H.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,H.jsx)(U,{style:{color:"#8c8c8c",fontSize:"12px"},children:"Status:"}),(0,H.jsx)("div",{style:{color:"online"===ne.status?"#52c41a":"#ff4d4f",fontSize:"14px",fontWeight:500},children:ne.status})]}),(0,H.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,H.jsx)(U,{style:{color:"#8c8c8c",fontSize:"12px"},children:"Description:"}),(0,H.jsx)("div",{style:{color:"#fff",fontSize:"14px"},children:ae.description})]})]})]})]})]})},{title:"Load Generator Configuration",content:(0,H.jsxs)("div",{children:[(0,H.jsx)(G,{level:4,style:{color:"#fff",marginBottom:"20px"},children:"Select Load Generator & Configuration"}),(0,H.jsxs)(f.A,{gutter:16,children:[(0,H.jsxs)(u.A,{span:12,children:[(0,H.jsx)(G,{level:5,style:{color:"#fff",marginBottom:"12px"},children:"Load Generators"}),(0,H.jsx)(x.A,{direction:"vertical",style:{width:"100%"},size:"small",children:I.map(e=>(0,H.jsx)(h.A,{size:"small",hoverable:!0,style:{border:(null===ne||void 0===ne?void 0:ne.id)===e.id?"2px solid #1890ff":"1px solid #555",cursor:"pointer",background:"#333",borderRadius:"6px"},bodyStyle:{background:"#333",color:"#fff",padding:"12px"},onClick:()=>{se(e),Ue(e.id)},children:(0,H.jsxs)(x.A,{children:[(0,H.jsx)(w.A,{style:{color:"#1890ff"}}),(0,H.jsxs)("div",{children:[(0,H.jsx)(U,{strong:!0,style:{color:"#fff"},children:e.name}),(0,H.jsx)("br",{}),(0,H.jsxs)(U,{style:{color:"#ccc"},children:[e.host,":",e.port]})]})]})},e.id))})]}),(0,H.jsxs)(u.A,{span:12,children:[(0,H.jsx)(G,{level:5,style:{color:"#fff",marginBottom:"12px"},children:"Configurations"}),(0,H.jsx)(x.A,{direction:"vertical",style:{width:"100%"},size:"small",children:M.map(e=>(0,H.jsx)(h.A,{size:"small",hoverable:!0,style:{border:(null===de||void 0===de?void 0:de.id)===e.id?"2px solid #1890ff":"1px solid #555",cursor:"pointer",background:"#333",borderRadius:"6px"},bodyStyle:{background:"#333",color:"#fff",padding:"12px"},onClick:()=>ce(e),children:(0,H.jsxs)(x.A,{children:[(0,H.jsx)(_.A,{style:{color:"#1890ff"}}),(0,H.jsxs)("div",{children:[(0,H.jsx)(U,{strong:!0,style:{color:"#fff"},children:e.config_name}),(0,H.jsx)("br",{}),(0,H.jsxs)(U,{style:{color:"#ccc"},children:["CPU: ",e.system_cpu_cores," cores, Memory: ",e.system_memory_gb,"GB"]})]})]})},e.id))})]})]})]})},{title:"Execute",content:(0,H.jsxs)("div",{style:{textAlign:"center",padding:"40px 0"},children:[(0,H.jsx)(G,{level:4,style:{color:"#fff",marginBottom:"30px"},children:"Ready to Execute"}),(0,H.jsxs)(x.A,{direction:"vertical",size:"large",children:[(0,H.jsxs)("div",{style:{background:"#333",padding:"20px",borderRadius:"8px",border:"1px solid #555",textAlign:"left",maxWidth:"400px",margin:"0 auto"},children:[(0,H.jsxs)(U,{style:{color:"#fff",display:"block",marginBottom:"8px"},children:[(0,H.jsx)("strong",{children:"Strategy:"})," ",null===re||void 0===re?void 0:re.name]}),(0,H.jsxs)(U,{style:{color:"#fff",display:"block",marginBottom:"8px"},children:[(0,H.jsx)("strong",{children:"Load Generator:"})," ",null===ne||void 0===ne?void 0:ne.name]}),(0,H.jsxs)(U,{style:{color:"#fff",display:"block",marginBottom:"8px"},children:[(0,H.jsx)("strong",{children:"Deployment Mode:"})," ",null===ae||void 0===ae?void 0:ae.name]}),(0,H.jsxs)(U,{style:{color:"#fff",display:"block"},children:[(0,H.jsx)("strong",{children:"Configuration:"})," ",null===de||void 0===de?void 0:de.config_name]})]}),(0,H.jsx)(g.Ay,{type:"primary",size:"large",icon:(0,H.jsx)(S.A,{}),onClick:Ye,style:{height:"48px",fontSize:"16px",padding:"0 32px"},children:"Execute Test"})]})]})}][J])||void 0===t?void 0:t.content})()}),(0,H.jsx)("div",{style:{textAlign:"right",marginTop:"20px",borderTop:"1px solid rgba(255, 255, 255, 0.08)",paddingTop:"16px"},children:3===J&&(0,H.jsx)(g.Ay,{type:"primary",onClick:Ye,disabled:!re||!ne||!ae||!de,style:{background:"linear-gradient(135deg, #52c41a 0%, #73d13d 100%)",border:"none",height:"36px",borderRadius:"6px",padding:"0 20px",fontWeight:500,fontSize:"12px"},children:"Execute Test"})})]}):(0,H.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"250px",textAlign:"center"},children:(0,H.jsxs)("div",{children:[(0,H.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px",opacity:.3},children:"\ud83c\udfaf"}),(0,H.jsx)(G,{level:4,style:{color:"#fff",marginBottom:"4px",fontSize:"16px"},children:ve.length>0?"Select a scenario to configure":"No scenarios created yet"}),(0,H.jsx)(U,{style:{color:"#8c8c8c",fontSize:"12px",display:"block",marginBottom:"16px"},children:ve.length>0?"Choose a scenario from the left panel to start configuration":"Create your first test scenario to get started with performance testing"}),(0,H.jsx)(g.Ay,{type:"primary",size:"large",onClick:qe,style:{background:"linear-gradient(135deg, #1890ff 0%, #40a9ff 100%)",border:"none",height:"36px",borderRadius:"6px",padding:"0 20px",fontWeight:500,fontSize:"12px"},children:ve.length>0?"Create New Scenario":"Create Your First Scenario"})]})})})]})})]})]}),(0,H.jsxs)(h.A,{style:{background:"rgba(255, 255, 255, 0.02)",border:"1px solid rgba(255, 255, 255, 0.08)",borderRadius:"8px",backdropFilter:"blur(10px)",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2)"},headStyle:{background:"transparent",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",padding:"16px 20px 12px 20px"},bodyStyle:{background:"transparent",padding:"16px 20px"},children:[(0,H.jsx)(G,{level:3,style:{color:"#fff",margin:0,fontWeight:600,fontSize:"16px"},children:"\ud83d\udcca Execution History"}),(0,H.jsx)("div",{style:{marginTop:"12px"},children:(0,H.jsx)(m.A,{columns:Je,dataSource:l,rowKey:"id",pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>"Total ".concat(e," records"),style:{color:"#fff"}},style:{background:"transparent"},className:"custom-table"})})]}),(0,H.jsxs)(b.A,{title:"Script Editor",open:Q,onCancel:()=>Y(!1),footer:null,width:1e3,style:{top:20},children:[(0,H.jsx)("div",{style:{marginBottom:16},children:(0,H.jsx)(U,{children:"Edit your Locust script below:"})}),(0,H.jsx)(y.A.TextArea,{value:ye,onChange:e=>{return t=e.target.value,me(t),void(ge&&xe(e=>e.map(e=>e.id===ge?(0,r.A)((0,r.A)({},e),{},{content:t}):e)));var t},placeholder:"Enter your Locust script here...",rows:20,style:{fontFamily:"monospace"}}),(0,H.jsx)("div",{style:{textAlign:"right",marginTop:16},children:(0,H.jsxs)(x.A,{children:[(0,H.jsx)(g.Ay,{onClick:()=>Y(!1),children:"Cancel"}),(0,H.jsx)(g.Ay,{type:"primary",onClick:()=>{Y(!1),c.Ay.success("Script saved successfully")},children:"Save Script"})]})})]}),(0,H.jsx)(b.A,{title:"Create Test Execution",open:X,onCancel:()=>Z(!1),footer:null,width:600,children:(0,H.jsxs)(d.A,{layout:"vertical",onFinish:async t=>{if(e)try{const o={task_id:parseInt(e),strategy_id:t.strategy_id,load_generator_id:t.load_generator_id,load_generator_config_id:t.load_generator_config_id,execution_name:t.execution_name||"Execution_".concat((new Date).toLocaleString())};await L.KS.createTestExecution(o),c.Ay.success("Test execution created successfully"),Z(!1),Pe()}catch(o){c.Ay.error("Failed to create test execution")}},children:[(0,H.jsx)(d.A.Item,{name:"strategy_id",label:"Test Strategy",rules:[{required:!0,message:"Please select test strategy"}],children:(0,H.jsx)(j.A,{placeholder:"Select test strategy",children:E.map(e=>(0,H.jsxs)(j.A.Option,{value:e.id,children:[e.name," (",e.strategy_type,")"]},e.id))})}),(0,H.jsx)(d.A.Item,{name:"load_generator_id",label:"Load Generator",rules:[{required:!0,message:"Please select load generator"}],children:(0,H.jsx)(j.A,{placeholder:"Select load generator",onChange:e=>Ue(e),children:I.map(e=>(0,H.jsxs)(j.A.Option,{value:e.id,children:[e.name," (",e.host,")"]},e.id))})}),(0,H.jsx)(d.A.Item,{name:"load_generator_config_id",label:"Load Generator Config",rules:[{required:!0,message:"Please select load generator config"}],children:(0,H.jsx)(j.A,{placeholder:"Select load generator config",children:M.map(e=>(0,H.jsx)(j.A.Option,{value:e.id,children:e.config_name},e.id))})}),(0,H.jsx)(d.A.Item,{name:"execution_name",label:"Execution Name",children:(0,H.jsx)(y.A,{placeholder:"Enter execution name (optional)"})}),(0,H.jsx)(d.A.Item,{children:(0,H.jsxs)(x.A,{children:[(0,H.jsx)(g.Ay,{type:"primary",htmlType:"submit",children:"Create Execution"}),(0,H.jsx)(g.Ay,{onClick:()=>Z(!1),children:"Cancel"})]})})]})})]})},O=i.memo(K)}}]);
//# sourceMappingURL=2856.d6927bcf.chunk.js.map