"use strict";(self.webpackChunkpfp_frontend=self.webpackChunkpfp_frontend||[]).push([[6155],{26155:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var r=s(65043),a=s(73216),o=s(15492),n=s(89073),i=s(11645),c=s(3427),l=s(15444),d=s(1118),x=s(22019),m=s(92782),p=s(60647),g=s(47419),h=s(6051),y=s(26612),u=s(12624),f=s(63394),j=s(8918),A=s(95920),v=s(53159),k=s(61966),C=s(67407),b=s(94786),w=s(75337),S=s(90617),_=s(14524),N=s(46291),T=s(70579);const I=()=>{const{id:e}=(0,a.g)(),t=(0,a.Zp)(),[s,I]=(0,r.useState)(null),[E,B]=(0,r.useState)([]),[P,R]=(0,r.useState)(!1),[U,O]=(0,r.useState)(!1),[F,G]=(0,r.useState)(null),[W]=c.A.useForm();(0,r.useEffect)(()=>{e&&(L(),M())},[e]);const L=async()=>{if(e){R(!0);try{const t=await N.$x.getLoadGenerator(parseInt(e));I(t)}catch(t){x.Ay.error("Failed to fetch load generator details")}finally{R(!1)}}},M=async()=>{if(e)try{const t=await N.$x.getConfigs(parseInt(e));B(t)}catch(t){x.Ay.error("Failed to fetch configuration list")}},D=e=>{const t={online:{color:"#52c41a",text:"ONLINE"},offline:{color:"#ff4d4f",text:"OFFLINE"},maintenance:{color:"#faad14",text:"MAINTENANCE"}}[e]||{color:"#666",text:e.toUpperCase()};return(0,T.jsx)("span",{style:{backgroundColor:t.color,color:"#ffffff",padding:"4px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px"},children:t.text})},z=[{title:"CONFIG NAME",dataIndex:"config_name",key:"config_name"},{title:"MASTER CONFIG",key:"master",render:(e,t)=>(0,T.jsxs)("div",{children:[(0,T.jsxs)("div",{children:["CPU: ",t.master_cpu_cores," cores"]}),(0,T.jsxs)("div",{children:["Memory: ",t.master_memory_gb," GB"]})]})},{title:"WORKER CONFIG",key:"worker",render:(e,t)=>(0,T.jsxs)("div",{children:[(0,T.jsxs)("div",{children:["Count: ",t.worker_count," workers"]}),(0,T.jsxs)("div",{children:["CPU: ",t.worker_cpu_cores," cores/worker"]}),(0,T.jsxs)("div",{children:["Memory: ",t.worker_memory_gb," GB/worker"]})]})},{title:"STATUS",dataIndex:"is_valid",key:"is_valid",render:e=>(0,T.jsx)("span",{style:{backgroundColor:e?"#52c41a":"#ff4d4f",color:"#ffffff",padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:500},children:e?"VALID":"INVALID"})},{title:"ACTIONS",key:"action",render:(e,t)=>(0,T.jsxs)(h.A,{size:"small",children:[(0,T.jsx)(o.Ay,{type:"link",icon:(0,T.jsx)(C.A,{}),onClick:()=>{return G(e=t),W.setFieldsValue(e),void O(!0);var e},style:{color:"var(--primary)"},children:"EDIT"}),(0,T.jsx)(p.A,{title:"Delete this configuration?",onConfirm:()=>(async e=>{try{await N.$x.deleteConfig(e),x.Ay.success("Delete successful"),M()}catch(t){x.Ay.error("Delete failed")}})(t.id),okText:"Yes",cancelText:"No",okButtonProps:{style:{background:"#6366f1",borderColor:"#6366f1",color:"#ffffff",fontWeight:600}},cancelButtonProps:{style:{background:"#2d2d2d",borderColor:"#6366f1",color:"#ffffff",fontWeight:500}},overlayStyle:{background:"#1a1a1a",border:"2px solid #6366f1",borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.6)",color:"#ffffff"},overlayClassName:"custom-popconfirm",icon:(0,T.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:{display:"inline-block",verticalAlign:"baseline",marginBottom:"2px"},children:[(0,T.jsx)("circle",{cx:"12",cy:"12",r:"10",fill:"#faad14"}),(0,T.jsx)("rect",{x:"11",y:"6",width:"2",height:"8",rx:"1",fill:"#1a1a1a"}),(0,T.jsx)("circle",{cx:"12",cy:"17",r:"1.5",fill:"#1a1a1a"})]}),children:(0,T.jsx)(o.Ay,{type:"link",danger:!0,icon:(0,T.jsx)(k.A,{}),children:"DELETE"})})]})}];if(!s)return(0,T.jsx)("div",{style:{color:"var(--text-primary)"},children:"Loading..."});const q=[{key:"overview",label:"OVERVIEW",children:(0,T.jsxs)(g.A,{gutter:16,children:[(0,T.jsx)(i.A,{span:8,children:(0,T.jsxs)(n.A,{title:(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:[(0,T.jsx)(b.A,{style:{color:"var(--primary)"}}),"BASIC INFORMATION"]}),className:"detail-card",style:{minHeight:"300px"},children:[(0,T.jsxs)("div",{style:{marginBottom:16,color:"var(--text-primary)"},children:[(0,T.jsx)("strong",{children:"Name:"})," ",s.name]}),(0,T.jsxs)("div",{style:{marginBottom:16,color:"var(--text-primary)"},children:[(0,T.jsx)("strong",{children:"Host Address:"})," ",s.host,":",s.port]}),(0,T.jsxs)("div",{style:{marginBottom:16,color:"var(--text-primary)"},children:[(0,T.jsx)("strong",{children:"Username:"})," ",s.username]}),(0,T.jsxs)("div",{style:{marginBottom:16,color:"var(--text-primary)"},children:[(0,T.jsx)("strong",{children:"Status:"})," ",D(s.status)]}),s.description&&(0,T.jsxs)("div",{style:{color:"var(--text-primary)"},children:[(0,T.jsx)("strong",{children:"Description:"})," ",s.description]})]})}),(0,T.jsx)(i.A,{span:8,children:(0,T.jsxs)(n.A,{title:(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:[(0,T.jsx)(_.A,{style:{color:"var(--primary)"}}),"HARDWARE CONFIG"]}),className:"detail-card",style:{minHeight:"300px"},children:[(0,T.jsxs)("div",{style:{marginBottom:16,color:"var(--text-primary)"},children:[(0,T.jsx)("strong",{children:"CPU Cores:"})," ",s.cpu_cores||"N/A"," cores"]}),(0,T.jsxs)("div",{style:{marginBottom:16,color:"var(--text-primary)"},children:[(0,T.jsx)("strong",{children:"Memory:"})," ",s.memory_gb||"N/A"," GB"]}),s.network_bandwidth&&(0,T.jsxs)("div",{style:{marginBottom:16,color:"var(--text-primary)"},children:[(0,T.jsx)("strong",{children:"Network Bandwidth:"})," ",s.network_bandwidth]}),s.disk_space&&(0,T.jsxs)("div",{style:{color:"var(--text-primary)"},children:[(0,T.jsx)("strong",{children:"Disk Space:"})," ",s.disk_space]})]})}),(0,T.jsx)(i.A,{span:8,children:(0,T.jsxs)(n.A,{title:(0,T.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--text-primary)",fontSize:"16px",fontWeight:600},children:[(0,T.jsx)(v.A,{style:{color:"var(--primary)"}}),"SOFTWARE INFO"]}),className:"detail-card",style:{minHeight:"300px"},children:[s.os_info&&s.os_info.trim()&&(0,T.jsxs)("div",{style:{marginBottom:16,color:"var(--text-primary)"},children:[(0,T.jsx)("strong",{children:"Operating System:"})," ",s.os_info]}),s.python_version&&(0,T.jsxs)("div",{style:{marginBottom:16,color:"var(--text-primary)"},children:[(0,T.jsx)("strong",{children:"Python Version:"})," ",s.python_version]}),s.locust_version&&(0,T.jsxs)("div",{style:{marginBottom:16,color:"var(--text-primary)"},children:[(0,T.jsx)("strong",{children:"Locust Version:"})," ",s.locust_version]}),s.last_heartbeat&&(0,T.jsxs)("div",{style:{color:"var(--text-primary)"},children:[(0,T.jsx)("strong",{children:"Last Heartbeat:"})," ",new Date(s.last_heartbeat).toLocaleString()]}),!s.os_info&&!s.python_version&&!s.locust_version&&!s.last_heartbeat&&(0,T.jsx)("div",{style:{color:"var(--text-muted)",fontStyle:"italic"},children:"No software information available"})]})})]})},{key:"resources",label:"RESOURCE USAGE",children:(0,T.jsxs)(g.A,{gutter:16,children:[(0,T.jsx)(i.A,{span:8,children:(0,T.jsx)(n.A,{className:"detail-card",children:(0,T.jsx)(y.A,{title:(0,T.jsx)("span",{style:{color:"var(--text-primary)"},children:"CPU Usage"}),value:s.cpu_usage||0,suffix:"%",valueStyle:{color:(s.cpu_usage||0)>80?"#ff4d4f":"#52c41a",fontSize:"24px",fontWeight:600}})})}),(0,T.jsx)(i.A,{span:8,children:(0,T.jsx)(n.A,{className:"detail-card",children:(0,T.jsx)(y.A,{title:(0,T.jsx)("span",{style:{color:"var(--text-primary)"},children:"Memory Usage"}),value:s.memory_usage||0,suffix:"%",valueStyle:{color:(s.memory_usage||0)>80?"#ff4d4f":"#52c41a",fontSize:"24px",fontWeight:600}})})}),(0,T.jsx)(i.A,{span:8,children:(0,T.jsx)(n.A,{className:"detail-card",children:(0,T.jsx)(y.A,{title:(0,T.jsx)("span",{style:{color:"var(--text-primary)"},children:"Network Usage"}),value:s.network_usage||0,suffix:"%",valueStyle:{color:(s.network_usage||0)>80?"#ff4d4f":"#52c41a",fontSize:"24px",fontWeight:600}})})})]})},{key:"configs",label:"CONFIGURATION MANAGEMENT",children:(0,T.jsxs)("div",{children:[(0,T.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,T.jsx)(o.Ay,{type:"primary",icon:(0,T.jsx)(w.A,{}),onClick:()=>{G(null),W.resetFields(),O(!0)},className:"detail-button-primary",style:{marginRight:"8px"},children:"ADD CONFIG"}),(0,T.jsx)(o.Ay,{icon:(0,T.jsx)(S.A,{}),onClick:M,className:"detail-button-secondary",children:"REFRESH"})]}),(0,T.jsx)(f.A,{columns:z,dataSource:E,rowKey:"id",pagination:!1,className:"detail-table"})]})}];return(0,T.jsxs)("div",{className:"detail-page-container",children:[(0,T.jsxs)("div",{className:"detail-page-header",children:[(0,T.jsxs)(h.A,{style:{marginBottom:"16px"},children:[(0,T.jsx)(o.Ay,{icon:(0,T.jsx)(A.A,{}),onClick:()=>t("/load-generators"),className:"detail-button-secondary",children:"BACK"}),(0,T.jsx)("h1",{className:"detail-page-title",children:s.name}),D(s.status)]}),(0,T.jsx)("div",{children:(0,T.jsx)(o.Ay,{type:"primary",icon:(0,T.jsx)(S.A,{}),onClick:async()=>{if(e)try{const t=await N.$x.testConnection(parseInt(e));t.success?(x.Ay.success("Connection test successful"),L()):x.Ay.error(t.message)}catch(t){x.Ay.error("Connection test failed")}},className:"detail-button-primary",children:"TEST CONNECTION"})})]}),(0,T.jsx)("div",{className:"detail-page-content",children:(0,T.jsx)(j.A,{items:q,className:"detail-tabs"})}),(0,T.jsx)(m.A,{title:F?"Edit Configuration":"Add Configuration",open:U,onCancel:()=>O(!1),onOk:()=>W.submit(),width:800,className:"detail-modal",children:(0,T.jsxs)(c.A,{form:W,layout:"vertical",onFinish:async t=>{if(e)try{F?(await N.$x.updateConfig(F.id,t),x.Ay.success("Update successful")):(await N.$x.createConfig(parseInt(e),t),x.Ay.success("Create successful")),O(!1),M()}catch(s){x.Ay.error(F?"Update failed":"Create failed")}},className:"detail-form",children:[(0,T.jsx)(c.A.Item,{name:"config_name",label:"Configuration Name",rules:[{required:!0,message:"Please enter configuration name"}],children:(0,T.jsx)(l.A,{placeholder:"Enter configuration name"})}),(0,T.jsxs)("div",{className:"form-section",children:[(0,T.jsx)("h3",{style:{color:"var(--text-primary)"},children:"Master Configuration"}),(0,T.jsxs)(g.A,{gutter:16,children:[(0,T.jsx)(i.A,{span:8,children:(0,T.jsx)(c.A.Item,{name:"master_enabled",label:"Enable Master",valuePropName:"checked",children:(0,T.jsx)(u.A,{})})}),(0,T.jsx)(i.A,{span:8,children:(0,T.jsx)(c.A.Item,{name:"master_cpu_cores",label:"CPU Cores",rules:[{required:!0,message:"Please enter CPU cores"}],children:(0,T.jsx)(d.A,{min:1,style:{width:"100%"}})})}),(0,T.jsx)(i.A,{span:8,children:(0,T.jsx)(c.A.Item,{name:"master_memory_gb",label:"Memory (GB)",rules:[{required:!0,message:"Please enter memory size"}],children:(0,T.jsx)(d.A,{min:1,step:.1,style:{width:"100%"}})})})]})]}),(0,T.jsxs)("div",{className:"form-section",children:[(0,T.jsx)("h3",{style:{color:"var(--text-primary)"},children:"Worker Configuration"}),(0,T.jsxs)(g.A,{gutter:16,children:[(0,T.jsx)(i.A,{span:8,children:(0,T.jsx)(c.A.Item,{name:"worker_count",label:"Worker Count",rules:[{required:!0,message:"Please enter worker count"}],children:(0,T.jsx)(d.A,{min:1,style:{width:"100%"}})})}),(0,T.jsx)(i.A,{span:8,children:(0,T.jsx)(c.A.Item,{name:"worker_cpu_cores",label:"CPU Cores per Worker",rules:[{required:!0,message:"Please enter CPU cores"}],children:(0,T.jsx)(d.A,{min:1,style:{width:"100%"}})})}),(0,T.jsx)(i.A,{span:8,children:(0,T.jsx)(c.A.Item,{name:"worker_memory_gb",label:"Memory (GB) per Worker",rules:[{required:!0,message:"Please enter memory size"}],children:(0,T.jsx)(d.A,{min:1,step:.1,style:{width:"100%"}})})})]})]}),(0,T.jsxs)("div",{className:"form-section",children:[(0,T.jsx)("h3",{style:{color:"var(--text-primary)"},children:"System Reserved"}),(0,T.jsxs)(g.A,{gutter:16,children:[(0,T.jsx)(i.A,{span:8,children:(0,T.jsx)(c.A.Item,{name:"system_cpu_cores",label:"System Reserved CPU Cores",rules:[{required:!0,message:"Please enter system reserved CPU cores"}],children:(0,T.jsx)(d.A,{min:1,style:{width:"100%"}})})}),(0,T.jsx)(i.A,{span:8,children:(0,T.jsx)(c.A.Item,{name:"system_memory_gb",label:"System Reserved Memory (GB)",rules:[{required:!0,message:"Please enter system reserved memory"}],children:(0,T.jsx)(d.A,{min:1,step:.1,style:{width:"100%"}})})}),(0,T.jsx)(i.A,{span:8,children:(0,T.jsx)(c.A.Item,{name:"system_network_mbps",label:"System Reserved Network Bandwidth (Mbps)",rules:[{required:!0,message:"Please enter system reserved network bandwidth"}],children:(0,T.jsx)(d.A,{min:1,style:{width:"100%"}})})})]})]}),(0,T.jsx)(c.A.Item,{name:"description",label:"Configuration Description",children:(0,T.jsx)(l.A.TextArea,{rows:3,placeholder:"Enter configuration description"})})]})})]})},E=r.memo(I)},46291:(e,t,s)=>{s.d(t,{$x:()=>a,KS:()=>c,S7:()=>l,Xo:()=>n,vC:()=>o,yL:()=>i});const r=s(16599).A.create({baseURL:"/api/v1",timeout:1e4,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e.data,e=>{if(e.response){const{status:t,data:s}=e.response;throw 401===t&&(localStorage.removeItem("token"),window.location.href="/login"),new Error(s.message||"\u8bf7\u6c42\u5931\u8d25")}throw new Error("\u7f51\u7edc\u9519\u8bef")});const a={getLoadGenerators:e=>r.get("/load-generators/",{params:e}),getLoadGenerator:e=>r.get("/load-generators/".concat(e,"/")),createLoadGenerator:e=>r.post("/load-generators/",e),updateLoadGenerator:(e,t)=>r.put("/load-generators/".concat(e,"/"),t),deleteLoadGenerator:e=>r.delete("/load-generators/".concat(e,"/")),testConnection:e=>r.post("/load-generators/".concat(e,"/test-connection/")),getConfigs:e=>r.get("/load-generators/".concat(e,"/configs/")),createConfig:(e,t)=>r.post("/load-generators/".concat(e,"/configs/"),t),updateConfig:(e,t)=>r.put("/load-generators/configs/".concat(e,"/"),t),deleteConfig:e=>r.delete("/load-generators/configs/".concat(e,"/")),validateConfig:e=>r.post("/load-generators/configs/".concat(e,"/validate/"))},o={getTestTasks:e=>r.get("/test-tasks/",{params:e}),getTestTask:e=>r.get("/test-tasks/".concat(e,"/")),createTestTask:e=>r.post("/test-tasks/",e),updateTestTask:(e,t)=>r.put("/test-tasks/".concat(e,"/"),t),deleteTestTask:e=>r.delete("/test-tasks/".concat(e,"/")),getExecutions:e=>r.get("/test-tasks/".concat(e,"/executions/"))},n={getTestStrategies:e=>r.get("/test-strategies/",{params:e}),getTestStrategy:e=>r.get("/test-strategies/".concat(e,"/")),createTestStrategy:e=>r.post("/test-strategies/",e),updateTestStrategy:(e,t)=>r.put("/test-strategies/".concat(e,"/"),t),deleteTestStrategy:e=>r.delete("/test-strategies/".concat(e,"/"))},i={getTestScenariosByTask:e=>r.get("/test-scenarios/task/".concat(e,"/")),getTestScenario:e=>r.get("/test-scenarios/".concat(e,"/")),createTestScenario:e=>r.post("/test-scenarios/",e),updateTestScenario:(e,t)=>r.put("/test-scenarios/".concat(e,"/"),t),deleteTestScenario:e=>r.delete("/test-scenarios/".concat(e,"/")),getScenarioFiles:e=>r.get("/scenario-files/scenario/".concat(e,"/files/")),uploadScenarioFile:(e,t)=>r.post("/scenario-files/scenario/".concat(e,"/files/"),t,{headers:{"Content-Type":"multipart/form-data"}})},c={getTestExecutions:e=>r.get("/test-executions/",{params:e}),getTestExecution:e=>r.get("/test-executions/".concat(e,"/")),createTestExecution:e=>r.post("/test-executions/",e),updateTestExecution:(e,t)=>r.put("/test-executions/".concat(e,"/"),t),startTestExecution:e=>r.post("/test-executions/".concat(e,"/start/")),stopTestExecution:(e,t)=>r.post("/test-executions/".concat(e,"/stop/"),t),deleteTestExecution:e=>r.delete("/test-executions/".concat(e,"/"))},l={getHeartbeatStatus:()=>r.get("/heartbeat/status"),checkAllHeartbeats:()=>r.post("/heartbeat/check-all"),checkAllHeartbeatsAsync:()=>r.post("/heartbeat/check-all-async"),getTaskStatus:e=>r.get("/heartbeat/task/".concat(e))}}}]);
//# sourceMappingURL=6155.08e50a59.chunk.js.map