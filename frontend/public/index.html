<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta
      name="description"
      content="Jinx - Super Mega Death Rocket!"
    />
    <title>Jinx - Super Mega Death Rocket!</title>
  </head>
  <body>
    <noscript>您需要启用JavaScript才能运行此应用程序。</noscript>
    <div id="root"></div>
    <script>
      // 处理浏览器扩展冲突
      window.addEventListener('error', function(e) {
        try {
          var msg = (e && e.message ? String(e.message) : '').toLowerCase();
          var file = (e && e.filename ? String(e.filename) : '');
          var errMsg = (e && e.error && e.error.message ? String(e.error.message) : '').toLowerCase();

          var isExt = file.indexOf('chrome-extension://') === 0 || errMsg.indexOf('chrome-extension') >= 0;
          var isEth = errMsg.indexOf('ethereum') >= 0 || errMsg.indexOf('cannot redefine property') >= 0;
          var isScriptError = msg.indexOf('script error') >= 0;

          if (isExt || isEth || (isScriptError && isExt)) {
            console.warn('拦截到扩展相关脚本错误，已忽略:', { msg: msg, file: file });
            e.preventDefault();
            return false;
          }
        } catch (_) {}
      }, true);
      
      // 处理未捕获的Promise错误
      window.addEventListener('unhandledrejection', function(e) {
        if (e.reason && e.reason.message && e.reason.message.includes('Cannot redefine property: ethereum')) {
          console.warn('检测到Web3扩展Promise冲突，已忽略此错误');
          e.preventDefault();
        }
      });
    </script>
  </body>
</html>
